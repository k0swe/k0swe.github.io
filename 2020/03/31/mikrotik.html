<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Playing with MikroTiks | K0SWE Blog</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Playing with MikroTiks" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Events and projects for amateur radio operator K0SWE, a.k.a. Chris." />
<meta property="og:description" content="Events and projects for amateur radio operator K0SWE, a.k.a. Chris." />
<link rel="canonical" href="https://k0swe.radio/2020/03/31/mikrotik.html" />
<meta property="og:url" content="https://k0swe.radio/2020/03/31/mikrotik.html" />
<meta property="og:site_name" content="K0SWE Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-31T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Playing with MikroTiks" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://k0swe.radio/2020/03/31/mikrotik.html"},"description":"Events and projects for amateur radio operator K0SWE, a.k.a. Chris.","url":"https://k0swe.radio/2020/03/31/mikrotik.html","@type":"BlogPosting","headline":"Playing with MikroTiks","dateModified":"2020-03-31T00:00:00+00:00","datePublished":"2020-03-31T00:00:00+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://k0swe.radio/feed.xml" title="K0SWE Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">K0SWE Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a><a class="page-link" href="/army">Army</a><a class="page-link" href="/links">Links</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Playing with MikroTiks</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-03-31T00:00:00+00:00" itemprop="datePublished">
        Mar 31, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><img src="/assets/2020-04-01-mikrotik.jpg" alt="MikroTik networking gear" /></p>

<p>In an effort to jog my memory from last December’s RMHAM networking workshop, I decided to set up a
miniature lab of my own. I’m glad I did, because even a simple arrangement had me scratching my head
for a while!</p>

<p>I had two MikroTik LHGs, two hEX PoE lites, and two laptops, and the goal was to get those
configured to ping from one side to the other and back via Part 97 frequencies with RMHAM’s
conventions.</p>

<p>The initial setup went well enough. One wrinkle is that I run Linux on almost all of my computers,
and run MikroTik’s Winbox client using a Wine compatibility layer. That’s fine, but I also use UFW
as a firewall, which interferes with Winbox’s ability to scan for neighbors or connect by MAC
address. I had to remember to turn off UFW while doing this experiment.</p>

<p>Also, I was trying to power the LHGs using the hEX routers and avoid even more cable spaghetti by
using separate PoE injectors. This meant that I couldn’t plug directly into the LHGs; when I
mis-configured them and needed to get back in by MAC, I had to add their port to the hEX router’s
bridge temporarily. Seems like a sneaky kludge, but it worked.</p>

<p>To get the MikroTik LHG radios to use the ham band, they have to be the “international” version.
After that, you can use the “superchannel” selection to change the available frequencies and move to
the ham band. RMHAM usually uses their club callsign <code class="language-plaintext highlighter-rouge">N0SZ</code> as part of the 802.11 SSID so that every
packet transmitted has station identification per Part 97, so I followed suit and used my own
callsign.</p>

<p>At the last step I was still having trouble; my pings between the laptops were only getting halfway
through the network. The radios could ping each other, but the routers weren’t working together.
Finally, I took the radios out since they were bridging and therefore just a fancy ethernet cable,
and plugged the routers directly together. The problem persisted, and I found that my static route
gateways were set to forward by interface, not to their neighbor’s IP. Once I fixed that, the
traffic started flowing, and kept flowing after reintroducing the radios.</p>

<p>I didn’t touch OSPF this time around, and I don’t know that two routers is enough to do a meaningful
experiment, but I should refresh myself on that as well.</p>

  </div>

  <div class="post-nav">
    <p>
      
      <a href="/2020/03/29/first-hf-qso.html">&#8672;&nbsp;First HF contact!</a>
      
    </p>
    <p>
      
      <a href="/2020/04/02/ft8.html">First FT8 contact!&nbsp;&#8674;</a>
      
    </p>
  </div><a class="u-url" href="/2020/03/31/mikrotik.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">K0SWE Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">K0SWE Blog</li><li><a class="u-email" href="mailto:k0swe@arrl.net">k0swe@arrl.net</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/xylo04"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">xylo04</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Events and projects for amateur radio operator K0SWE, a.k.a. Chris.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
